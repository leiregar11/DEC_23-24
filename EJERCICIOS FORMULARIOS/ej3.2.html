<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ej3-leire</title>
    <style>
        .error{
            color: red;
        }
    </style>
    <script>
        window.onload=inicio;
        function inicio(){
            var formulario = document.getElementById("formulario");
            formulario.elements["problema"].addEventListener("keypress", textMax);            ;
            
            formulario.addEventListener("submit", validar);
        }
        function validar(event) {
            for (let i = 0; i < elemetos.length; i++) {
                let elemento = elemetos[i];
                if(!correcto(elemento)){
                    elemento.clasName="error";
                    event.preventDefault();
                }else {
                    elemento.classList.remove("error");
                }
                
            }
            
        }
        function correcto(elemento){
            let tipo=elemento.type;
            if(tipo==="text"){
                if(textValido(nombre)|| textValido(apellidos)){
                    return true;
                }
            }
            if(tipo==="textarea"){
                if(textValido(problema)){
                    return true;
                }
            }
            if(tipo==="tel"){
                if(telfValido(telefono)){
                    return true;
                }
            }else{
                if( emailValido(email)){
                    return true;
                }
            }
            
            return false;
        }
        function textValido(text){
            if(text!==""){
                return true;
            }
            return false;
        }
        function textMax(event){
            if(this.value.length===10){
                // alert("El tamaño maximo es 100");
                event.preventDefault();
            }
        }
        function telfValido(telf){
            if(telf.length>9 ||telf.length<9 ||textValido(telf)){
                return true;
            }
            return false;
        }
        function emailValido(email){
            if(email.indexOf("@") && email.indexOf(".")||textValido(email)){
                return true;
            }
            return false;
        }
    </script>
</head>

<body>
    <h1>Formulario de Ayuda</h1>
    <form id="formulario">
        <label for="nombre">Nombre:</label>
        <input type="text" name="nombre" ><br><br>

        <label for="apellidos">Apellidos:</label>
        <input type="text" name="apellidos" ><br><br>

        <label for="problema">Describa su problema:</label><br>
        <textarea name="problema"  ></textarea><br>
        <p  id="contador"></p><br>

        <label for="telefono">Teléfono:</label>
        <input type="tel" name="telefono" pattern="[0-9]+" ><br><br>

        <label for="email">Correo Electrónico:</label>
        <input type="email" name="email" ><br><br>

        <input type="submit" value="Enviar">
    </form>
</body>
</html>